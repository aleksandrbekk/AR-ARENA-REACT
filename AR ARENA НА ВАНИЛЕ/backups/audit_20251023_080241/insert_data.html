<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í—Å—Ç–∞–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0a0a; color: white; padding: 40px 20px;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        h1 {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
            margin-bottom: 30px;
        }
        .section {
            background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px; padding: 25px; margin-bottom: 25px;
        }
        h2 { color: #FFD700; margin-bottom: 15px; font-size: 20px; }
        button {
            padding: 14px 28px; background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000; border: none; border-radius: 12px; font-size: 15px;
            font-weight: 600; cursor: pointer; transition: all 0.3s; margin: 5px;
        }
        button:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3); }
        .log {
            background: #000; padding: 15px; border-radius: 8px; margin-top: 15px;
            font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto;
        }
        .success { color: #38EF7D; }
        .error { color: #FF6B35; }
        .info { color: #FFD700; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Setup –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö AR ARENA</h1>

        <!-- –®–ê–ì 0: –°–û–ó–î–ê–ù–ò–ï –¢–ê–ë–õ–ò–¶ -->
        <div class="section" style="border: 2px solid #FFD700; background: rgba(255, 215, 0, 0.05);">
            <h2>üóÑÔ∏è –®–∞–≥ 0: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ë–î (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!)</h2>
            <p style="color: rgba(255,255,255,0.7); margin-bottom: 15px;">
                –ü–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π –¥–∞–Ω–Ω—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –≤ Supabase. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ - SQL –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è SQL Editor.
            </p>

            <button onclick="copyAndOpenSupabase()" style="font-size: 16px; padding: 16px 32px;">
                üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å SQL –∏ –æ—Ç–∫—Ä—ã—Ç—å Supabase ‚Üí
            </button>
            <button onclick="checkTables()" style="background: rgba(255,255,255,0.1); color: #FFD700;">
                üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã
            </button>

            <div style="margin-top: 15px; padding: 12px; background: rgba(0,0,0,0.3); border-radius: 8px; border-left: 3px solid #FFD700;">
                <strong style="color: #FFD700;">üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</strong>
                <ol style="margin-left: 20px; margin-top: 8px; color: rgba(255,255,255,0.8); line-height: 1.8;">
                    <li>–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ (SQL —Å–∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)</li>
                    <li>–í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è Supabase Dashboard –Ω–∞–∂–º–∏—Ç–µ <strong>Cmd+V</strong> (–≤—Å—Ç–∞–≤–∏—Ç—å)</li>
                    <li>–ù–∞–∂–º–∏—Ç–µ <strong>Run</strong> –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü</li>
                    <li>–í–µ—Ä–Ω–∏—Ç–µ—Å—å —Å—é–¥–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã"</li>
                </ol>
            </div>

            <div id="tablesLog" class="log"></div>
        </div>

        <h1 style="margin-top: 40px;">üì¶ –í—Å—Ç–∞–≤–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</h1>

        <div class="section">
            <h2>üìö –°—Ç–∞—Ç—å–∏</h2>
            <button onclick="insertArticles()">–î–æ–±–∞–≤–∏—Ç—å 3 —Å—Ç–∞—Ä—Ç–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏</button>
            <div id="articlesLog" class="log"></div>
        </div>

        <div class="section">
            <h2>üéì –ö—É—Ä—Å "–û—Å–Ω–æ–≤—ã –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç"</h2>
            <button onclick="insertCourse()">–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å —Å 4 —É—Ä–æ–∫–∞–º–∏</button>
            <div id="courseLog" class="log"></div>
        </div>

        <div class="section">
            <h2>üõí –ü—Ä–æ–¥—É–∫—Ç—ã –º–∞–≥–∞–∑–∏–Ω–∞</h2>
            <button onclick="insertProducts()">–î–æ–±–∞–≤–∏—Ç—å 6 –ø—Ä–æ–¥—É–∫—Ç–æ–≤</button>
            <div id="productsLog" class="log"></div>
        </div>

        <div class="section">
            <h2>üèÜ –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–µ —á–µ–ª–ª–µ–Ω–¥–∂–∏</h2>
            <button onclick="insertChallenges()">–°–æ–∑–¥–∞—Ç—å 3 —á–µ–ª–ª–µ–Ω–¥–∂–∞</button>
            <div id="challengesLog" class="log"></div>
        </div>

        <div class="section">
            <h2>üéÅ –†–æ–∑—ã–≥—Ä—ã—à–∏</h2>
            <button onclick="insertLottery()">–°–æ–∑–¥–∞—Ç—å —Ä–æ–∑—ã–≥—Ä—ã—à $200</button>
            <div id="lotteryLog" class="log"></div>
        </div>

        <div class="section">
            <h2>‚ö° –í—Å—Ç–∞–≤–∏—Ç—å –≤—Å—ë —Å—Ä–∞–∑—É</h2>
            <button onclick="insertAll()">–°–æ–∑–¥–∞—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ</button>
        </div>
    </div>

    <script src="supabase-client.js?v=20251013"></script>
    <script>
        // SQL –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
        const CREATE_TABLES_SQL = `-- –ë–õ–û–ö 1: –°–ò–°–¢–ï–ú–ê –°–¢–ê–¢–ï–ô
CREATE TABLE IF NOT EXISTS articles (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title TEXT NOT NULL,
    category TEXT NOT NULL,
    content TEXT NOT NULL,
    reward_ar INTEGER NOT NULL DEFAULT 0,
    reading_time INTEGER NOT NULL DEFAULT 1,
    cover_image TEXT,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS article_reads (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id BIGINT NOT NULL,
    article_id UUID REFERENCES articles(id) ON DELETE CASCADE,
    completed_at TIMESTAMP DEFAULT NOW(),
    reward_claimed BOOLEAN DEFAULT false,
    UNIQUE(user_id, article_id)
);

-- –ë–õ–û–ö 2: –ö–£–†–°–´
CREATE TABLE IF NOT EXISTS courses (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title TEXT NOT NULL,
    description TEXT,
    difficulty TEXT DEFAULT 'beginner',
    total_lessons INTEGER NOT NULL DEFAULT 0,
    total_reward INTEGER NOT NULL DEFAULT 0,
    cover_image TEXT,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS lessons (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
    lesson_number INTEGER NOT NULL,
    title TEXT NOT NULL,
    content TEXT NOT NULL,
    reward_ar INTEGER NOT NULL DEFAULT 0,
    quiz_required BOOLEAN DEFAULT false,
    quiz_id UUID,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS course_progress (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id BIGINT NOT NULL,
    course_id UUID REFERENCES courses(id) ON DELETE CASCADE,
    lesson_id UUID REFERENCES lessons(id) ON DELETE CASCADE,
    completed BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(user_id, lesson_id)
);

-- –ë–õ–û–ö 3: –ï–ñ–ï–ù–ï–î–ï–õ–¨–ù–´–ï –ß–ï–õ–õ–ï–ù–î–ñ–ò
CREATE TABLE IF NOT EXISTS weekly_challenges (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title TEXT NOT NULL,
    description TEXT,
    goal_referrals INTEGER NOT NULL,
    reward_ar INTEGER NOT NULL,
    week_start DATE NOT NULL,
    week_end DATE NOT NULL,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS challenge_progress (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id BIGINT NOT NULL,
    challenge_id UUID REFERENCES weekly_challenges(id) ON DELETE CASCADE,
    referral_count INTEGER DEFAULT 0,
    reward_claimed BOOLEAN DEFAULT false,
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(user_id, challenge_id)
);

-- –ë–õ–û–ö 4: –ú–ê–ì–ê–ó–ò–ù
CREATE TABLE IF NOT EXISTS products (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title TEXT NOT NULL,
    description TEXT,
    price_usd INTEGER NOT NULL,
    price_ar INTEGER,
    category TEXT NOT NULL,
    image_url TEXT,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS purchases (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id BIGINT NOT NULL,
    product_id UUID REFERENCES products(id),
    price_paid INTEGER NOT NULL,
    currency TEXT NOT NULL,
    status TEXT DEFAULT 'pending',
    expires_at TIMESTAMP,
    created_at TIMESTAMP DEFAULT NOW()
);

-- –ë–õ–û–ö 5: –†–£–õ–ï–¢–ö–ê
CREATE TABLE IF NOT EXISTS daily_spins (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id BIGINT NOT NULL,
    spin_date DATE NOT NULL DEFAULT CURRENT_DATE,
    reward_ar INTEGER NOT NULL,
    created_at TIMESTAMP DEFAULT NOW(),
    UNIQUE(user_id, spin_date)
);

-- –ë–õ–û–ö 6: –†–û–ó–´–ì–†–´–®–ò
CREATE TABLE IF NOT EXISTS lotteries (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title TEXT NOT NULL,
    prize TEXT NOT NULL,
    prize_value INTEGER DEFAULT 0,
    entry_cost_ar INTEGER NOT NULL,
    start_date TIMESTAMP NOT NULL,
    end_date TIMESTAMP NOT NULL,
    status TEXT DEFAULT 'upcoming',
    winner_id BIGINT,
    created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE IF NOT EXISTS lottery_tickets (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    lottery_id UUID REFERENCES lotteries(id) ON DELETE CASCADE,
    user_id BIGINT NOT NULL,
    ticket_number TEXT NOT NULL UNIQUE,
    purchased_at TIMESTAMP DEFAULT NOW()
);

-- –ò–ù–î–ï–ö–°–´ –î–õ–Ø –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–ò
CREATE INDEX IF NOT EXISTS idx_article_reads_user ON article_reads(user_id);
CREATE INDEX IF NOT EXISTS idx_course_progress_user ON course_progress(user_id);
CREATE INDEX IF NOT EXISTS idx_challenge_progress_user ON challenge_progress(user_id);
CREATE INDEX IF NOT EXISTS idx_purchases_user ON purchases(user_id);
CREATE INDEX IF NOT EXISTS idx_daily_spins_user_date ON daily_spins(user_id, spin_date);
CREATE INDEX IF NOT EXISTS idx_lottery_tickets_user ON lottery_tickets(user_id);
CREATE INDEX IF NOT EXISTS idx_lottery_tickets_lottery ON lottery_tickets(lottery_id);
`;

        // –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ SQL –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ Supabase
        async function copyAndOpenSupabase() {
            try {
                // –ö–æ–ø–∏—Ä—É–µ–º SQL –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
                await navigator.clipboard.writeText(CREATE_TABLES_SQL);
                log('‚úÖ SQL —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!', 'success', 'tablesLog');

                // –û—Ç–∫—Ä—ã–≤–∞–µ–º Supabase SQL Editor
                window.open('https://supabase.com/dashboard/project/syxjkircmiwpnpagznay/sql/new', '_blank');

                log('üìÇ –û—Ç–∫—Ä—ã—Ç Supabase SQL Editor', 'info', 'tablesLog');
                log('üëâ –í—Å—Ç–∞–≤—å—Ç–µ SQL (Cmd+V) –∏ –Ω–∞–∂–º–∏—Ç–µ Run', 'info', 'tablesLog');
                log('üëâ –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –≤–µ—Ä–Ω–∏—Ç–µ—Å—å —Å—é–¥–∞ –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã"', 'info', 'tablesLog');

            } catch (error) {
                log('‚ùå –û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è: ' + error.message, 'error', 'tablesLog');
                log('üí° –û—Ç–∫—Ä–æ–π—Ç–µ create_tables.sql –≤—Ä—É—á–Ω—É—é', 'info', 'tablesLog');
            }
        }

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
        async function checkTables() {
            log('üîç –ü—Ä–æ–≤–µ—Ä—è—é –Ω–∞–ª–∏—á–∏–µ —Ç–∞–±–ª–∏—Ü...', 'info', 'tablesLog');

            const supabase = window.supabaseClient || window.db;
            if (!supabase) {
                log('‚ùå Supabase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error', 'tablesLog');
                return;
            }

            const tables = [
                'articles', 'article_reads',
                'courses', 'lessons', 'course_progress',
                'weekly_challenges', 'challenge_progress',
                'products', 'purchases',
                'daily_spins',
                'lotteries', 'lottery_tickets'
            ];

            let existingCount = 0;
            let missingTables = [];

            for (const table of tables) {
                try {
                    const { data, error } = await supabase.from(table).select('id').limit(1);

                    if (error) {
                        if (error.message.includes('does not exist') || error.code === '42P01') {
                            missingTables.push(table);
                            log(`‚ùå –¢–∞–±–ª–∏—Ü–∞ ${table} –Ω–µ –Ω–∞–π–¥–µ–Ω–∞`, 'error', 'tablesLog');
                        } else {
                            log(`‚ö†Ô∏è ${table}: ${error.message}`, 'error', 'tablesLog');
                        }
                    } else {
                        existingCount++;
                        log(`‚úÖ –¢–∞–±–ª–∏—Ü–∞ ${table} —Å—É—â–µ—Å—Ç–≤—É–µ—Ç`, 'success', 'tablesLog');
                    }
                } catch (e) {
                    missingTables.push(table);
                    log(`‚ùå ${table}: ${e.message}`, 'error', 'tablesLog');
                }
            }

            if (existingCount === tables.length) {
                log('', 'info', 'tablesLog');
                log('üéâ –í–°–ï –¢–ê–ë–õ–ò–¶–´ –°–û–ó–î–ê–ù–´! –ú–æ–∂–µ—Ç–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ –≤—Å—Ç–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∏–∂–µ ‚¨áÔ∏è', 'success', 'tablesLog');
            } else {
                log('', 'info', 'tablesLog');
                log(`‚ö†Ô∏è –ù–∞–π–¥–µ–Ω–æ ${existingCount} –∏–∑ ${tables.length} —Ç–∞–±–ª–∏—Ü`, 'error', 'tablesLog');
                log(`‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç: ${missingTables.join(', ')}`, 'error', 'tablesLog');
                log('üëâ –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å SQL –∏ –æ—Ç–∫—Ä—ã—Ç—å Supabase" –≤—ã—à–µ', 'info', 'tablesLog');
            }
        }

        function log(message, type = 'info', logId) {
            const logEl = document.getElementById(logId);
            const time = new Date().toLocaleTimeString();
            logEl.innerHTML += `<div class="${type}">[${time}] ${message}</div>`;
            logEl.scrollTop = logEl.scrollHeight;
        }

        async function insertArticles() {
            log('–ù–∞—á–∏–Ω–∞—é –≤—Å—Ç–∞–≤–∫—É —Å—Ç–∞—Ç–µ–π...', 'info', 'articlesLog');

            const supabase = window.supabaseClient || window.db;
            if (!supabase) {
                log('‚ùå Supabase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error', 'articlesLog');
                return;
            }

            const articles = [
                {
                    title: '–ß—Ç–æ —Ç–∞–∫–æ–µ AR Points',
                    category: '–û–±—É—á–∞—é—â–∏–µ',
                    content: '<h2>AR Points - –≤–∞—à–∞ –≤–∞–ª—é—Ç–∞ –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ</h2><p>AR Points - —ç—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –≤–∞–ª—é—Ç–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã AR ARENA. –í—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å AR –≤—ã–ø–æ–ª–Ω—è—è –∑–∞–¥–∞–Ω–∏—è, —á–∏—Ç–∞—è —Å—Ç–∞—Ç—å–∏, –ø—Ä–æ—Ö–æ–¥—è –∫–≤–∏–∑—ã –∏ –ø—Ä–∏–≥–ª–∞—à–∞—è –¥—Ä—É–∑–µ–π.</p><h3>–ö–∞–∫ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å AR?</h3><ul><li>–ü—Ä–æ—Ö–æ–¥–∏—Ç–µ –∫–≤–∏–∑—ã –∏ –ø–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã</li><li>–ß–∏—Ç–∞–π—Ç–µ –æ–±—É—á–∞—é—â–∏–µ —Å—Ç–∞—Ç—å–∏</li><li>–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ</li><li>–£—á–∞—Å—Ç–≤—É–π—Ç–µ –≤ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö —á–µ–ª–ª–µ–Ω–¥–∂–∞—Ö</li></ul><h3>–ö–∞–∫ —Ç—Ä–∞—Ç–∏—Ç—å AR?</h3><p>AR Points –º–æ–∂–Ω–æ –æ–±–º–µ–Ω—è—Ç—å –Ω–∞ –ø—Ä–µ–º–∏—É–º-–ø—Ä–æ–¥—É–∫—Ç—ã –≤ –Ω–∞—à–µ–º –º–∞–≥–∞–∑–∏–Ω–µ: —Å–∏–≥–Ω–∞–ª—ã, –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏, –¥–æ—Å—Ç—É–ø –∫ —ç—Ñ–∏—Ä–∞–º –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ!</p>',
                    reward_ar: 50,
                    reading_time: 2,
                    cover_image: '/icons/coin.png'
                },
                {
                    title: '–ö–∞–∫ –Ω–∞—á–∞—Ç—å —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –Ω–∞ Binance',
                    category: '–û–±—É—á–∞—é—â–∏–µ',
                    content: '<h2>–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ Binance</h2><p>Binance - –∫—Ä—É–ø–Ω–µ–π—à–∞—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω–∞—è –±–∏—Ä–∂–∞ –≤ –º–∏—Ä–µ. –°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º —à–∞–≥–∞–º –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã:</p><h3>–®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h3><p>–ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç Binance –∏ –Ω–∞–∂–º–∏—Ç–µ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è". –í–≤–µ–¥–∏—Ç–µ email –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–∞–¥—ë–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å.</p><h3>–®–∞–≥ 2: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è</h3><p>–ü—Ä–æ–π–¥–∏—Ç–µ KYC –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º –±–∏—Ä–∂–∏.</p><h3>–®–∞–≥ 3: –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á—ë—Ç–∞</h3><p>–í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è: –±–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞, P2P –∏–ª–∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞.</p><h3>–®–∞–≥ 4: –ü–µ—Ä–≤–∞—è —Å–¥–µ–ª–∫–∞</h3><p>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ—Ä–≥–æ–≤—É—é –ø–∞—Ä—É –∏ —Å–æ–≤–µ—Ä—à–∏—Ç–µ –ø–µ—Ä–≤—É—é –ø–æ–∫—É–ø–∫—É –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã!</p>',
                    reward_ar: 100,
                    reading_time: 5,
                    cover_image: '/icons/binance.png'
                },
                {
                    title: '–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ - –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥',
                    category: '–ü–∞—Ä—Ç–Ω–µ—Ä—Å–∫–∏–µ',
                    content: '<h2>–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ —Å –¥—Ä—É–∑—å—è–º–∏</h2><p>–ù–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∞—Ç—å –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥.</p><h3>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</h3><p><strong>1-—è –ª–∏–Ω–∏—è (–≤–∞—à–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—ã):</strong> 200 AR –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é + 10% –æ—Ç –∏—Ö –ø–æ–∫—É–ø–æ–∫</p><p><strong>2-—è –ª–∏–Ω–∏—è (—Ä–µ—Ñ–µ—Ä–∞–ª—ã –≤–∞—à–∏—Ö —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤):</strong> 100 AR –∑–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é + 5% –æ—Ç –∏—Ö –ø–æ–∫—É–ø–æ–∫</p><h3>–ö–∞–∫ –Ω–∞—á–∞—Ç—å?</h3><ol><li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–≤–æ—é —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É</li><li>–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å –¥—Ä—É–∑—å—è–º–∏ –≤ —Å–æ—Ü—Å–µ—Ç—è—Ö</li><li>–ü–æ–ª—É—á–∞–π—Ç–µ –Ω–∞–≥—Ä–∞–¥—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!</li></ol><p>–ß–µ–º –±–æ–ª—å—à–µ –¥—Ä—É–∑–µ–π –≤—ã –ø—Ä–∏–≥–ª–∞—Å–∏—Ç–µ, —Ç–µ–º –±–æ–ª—å—à–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç–µ. –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –¢–û–ü-100 –ª–∏–¥–µ—Ä–æ–≤!</p>',
                    reward_ar: 75,
                    reading_time: 3,
                    cover_image: '/icons/referral.png'
                }
            ];

            for (const article of articles) {
                const { error } = await supabase.from('articles').insert(article);
                if (error) {
                    log(`‚ùå ${article.title}: ${error.message}`, 'error', 'articlesLog');
                } else {
                    log(`‚úÖ ${article.title} –¥–æ–±–∞–≤–ª–µ–Ω–∞`, 'success', 'articlesLog');
                }
            }
        }

        async function insertCourse() {
            log('–°–æ–∑–¥–∞—é –∫—É—Ä—Å...', 'info', 'courseLog');

            const supabase = window.supabaseClient || window.db;
            if (!supabase) {
                log('‚ùå Supabase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error', 'courseLog');
                return;
            }

            const { data: course, error: courseError} = await supabase
                .from('courses')
                .insert({
                    title: '–û—Å–Ω–æ–≤—ã –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç',
                    description: '–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤ –≤ –º–∏—Ä–µ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç',
                    total_lessons: 4,
                    total_reward: 375,
                    cover_image: '/icons/course.png',
                    is_active: true
                })
                .select()
                .single();

            if (courseError) {
                log(`‚ùå ${courseError.message}`, 'error', 'courseLog');
                return;
            }

            log(`‚úÖ –ö—É—Ä—Å —Å–æ–∑–¥–∞–Ω`, 'success', 'courseLog');

            const lessons = [
                {
                    lesson_number: 1,
                    title: '–ß—Ç–æ —Ç–∞–∫–æ–µ –±–ª–æ–∫—á–µ–π–Ω',
                    content: '<h2>–û—Å–Ω–æ–≤—ã –±–ª–æ–∫—á–µ–π–Ω —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</h2><p>–ë–ª–æ–∫—á–µ–π–Ω - —ç—Ç–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö...</p>',
                    reward_ar: 50,
                    quiz_required: false
                },
                {
                    lesson_number: 2,
                    title: '–ë–∏—Ä–∂–∏ –∏ –∫–æ—à–µ–ª—å–∫–∏',
                    content: '<h2>–ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –∏ —Ç–æ—Ä–≥–æ–≤–∞—Ç—å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π</h2><p>–°—É—â–µ—Å—Ç–≤—É—é—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏ –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –±–∏—Ä–∂–∏...</p>',
                    reward_ar: 75,
                    quiz_required: true
                },
                {
                    lesson_number: 3,
                    title: '–†–∏—Å–∫–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å',
                    content: '<h2>–ö–∞–∫ –∑–∞—â–∏—Ç–∏—Ç—å —Å–≤–æ–∏ –∞–∫—Ç–∏–≤—ã</h2><p>–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤ –∫—Ä–∏–ø—Ç–µ...</p>',
                    reward_ar: 100,
                    quiz_required: false
                },
                {
                    lesson_number: 4,
                    title: '–ü–µ—Ä–≤–∞—è –ø–æ–∫—É–ø–∫–∞ BTC',
                    content: '<h2>–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ</h2><p>–ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–∫—É–ø–∫–∏ Bitcoin...</p>',
                    reward_ar: 150,
                    quiz_required: true
                }
            ];

            for (const lesson of lessons) {
                const { error } = await supabase.from('lessons').insert({
                    course_id: course.id,
                    ...lesson
                });

                if (error) {
                    log(`‚ùå –£—Ä–æ–∫ ${lesson.lesson_number}: ${error.message}`, 'error', 'courseLog');
                } else {
                    log(`‚úÖ –£—Ä–æ–∫ ${lesson.lesson_number}: ${lesson.title}`, 'success', 'courseLog');
                }
            }
        }

        async function insertProducts() {
            log('–î–æ–±–∞–≤–ª—è—é –ø—Ä–æ–¥—É–∫—Ç—ã...', 'info', 'productsLog');

            const supabase = window.supabaseClient || window.db;
            if (!supabase) {
                log('‚ùå Supabase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error', 'productsLog');
                return;
            }

            const products = [
                { title: '–°–∏–≥–Ω–∞–ª Futures', description: '–¢–æ—á–Ω—ã–π —Å–∏–≥–Ω–∞–ª –Ω–∞ —Ñ—å—é—á–µ—Ä—Å—ã —Å –ø–ª–µ—á–æ–º –¥–æ 20x', price_usd: 50, price_ar: 15000, category: 'signal', image_url: '/icons/futures.png' },
                { title: '–°–∏–≥–Ω–∞–ª SPOT', description: '–°–ø–æ—Ç–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∏—Å–∫–æ–º', price_usd: 40, price_ar: 12000, category: 'signal', image_url: '/icons/spot.png' },
                { title: '–†–∞–∑–±–æ—Ä –ø–æ—Ä—Ç—Ñ–µ–ª—è', description: '–õ–∏—á–Ω—ã–π —Ä–∞–∑–±–æ—Ä –≤–∞—à–µ–≥–æ –∫—Ä–∏–ø—Ç–æ–ø–æ—Ä—Ç—Ñ–µ–ª—è –æ—Ç —ç–∫—Å–ø–µ—Ä—Ç–∞', price_usd: 100, price_ar: null, category: 'consultation', image_url: '/icons/portfolio.png' },
                { title: '–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è 1:1', description: '–õ–∏—á–Ω–∞—è —á–∞—Å–æ–≤–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —Å —Ç—Ä–µ–π–¥–µ—Ä–æ–º', price_usd: 150, price_ar: null, category: 'consultation', image_url: '/icons/consultation.png' },
                { title: '–í—ã—Ö–æ–¥ –∏–∑ –ø–æ–∑–∏—Ü–∏–∏', description: '–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –ø–æ–º–æ—â—å –≤ –∑–∞–∫—Ä—ã—Ç–∏–∏ —É–±—ã—Ç–æ—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏', price_usd: 75, price_ar: 22500, category: 'signal', image_url: '/icons/exit.png' },
                { title: '–î–æ—Å—Ç—É–ø –∫ —ç—Ñ–∏—Ä—É', description: '–£—á–∞—Å—Ç–∏–µ –≤ –∑–∞–∫—Ä—ã—Ç–æ–º —Ç–æ—Ä–≥–æ–≤–æ–º —ç—Ñ–∏—Ä–µ', price_usd: 25, price_ar: 7500, category: 'subscription', image_url: '/icons/live.png' }
            ];

            for (const product of products) {
                const { error } = await supabase.from('products').insert({ ...product, is_active: true });
                if (error) {
                    log(`‚ùå ${product.title}: ${error.message}`, 'error', 'productsLog');
                } else {
                    log(`‚úÖ ${product.title}`, 'success', 'productsLog');
                }
            }
        }

        async function insertChallenges() {
            log('–°–æ–∑–¥–∞—é —á–µ–ª–ª–µ–Ω–¥–∂–∏...', 'info', 'challengesLog');

            const supabase = window.supabaseClient || window.db;
            if (!supabase) {
                log('‚ùå Supabase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error', 'challengesLog');
                return;
            }

            const now = new Date();
            const monday = new Date(now);
            monday.setDate(now.getDate() - now.getDay() + 1);
            const sunday = new Date(monday);
            sunday.setDate(monday.getDate() + 6);

            const challenges = [
                { title: '–ü—Ä–∏–≥–ª–∞—Å–∏ 3 –¥—Ä—É–∑–µ–π', description: '–õ—ë–≥–∫–∏–π —É—Ä–æ–≤–µ–Ω—å', goal_referrals: 3, reward_ar: 200, week_start: monday.toISOString().split('T')[0], week_end: sunday.toISOString().split('T')[0] },
                { title: '–ü—Ä–∏–≥–ª–∞—Å–∏ 5 –¥—Ä—É–∑–µ–π', description: '–°—Ä–µ–¥–Ω–∏–π —É—Ä–æ–≤–µ–Ω—å', goal_referrals: 5, reward_ar: 500, week_start: monday.toISOString().split('T')[0], week_end: sunday.toISOString().split('T')[0] },
                { title: '–ü—Ä–∏–≥–ª–∞—Å–∏ 10 –¥—Ä—É–∑–µ–π', description: '–°–ª–æ–∂–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å', goal_referrals: 10, reward_ar: 1500, week_start: monday.toISOString().split('T')[0], week_end: sunday.toISOString().split('T')[0] }
            ];

            for (const challenge of challenges) {
                const { error } = await supabase.from('weekly_challenges').insert({ ...challenge, is_active: true });
                if (error) {
                    log(`‚ùå ${challenge.title}: ${error.message}`, 'error', 'challengesLog');
                } else {
                    log(`‚úÖ ${challenge.title}`, 'success', 'challengesLog');
                }
            }
        }

        async function insertLottery() {
            log('–°–æ–∑–¥–∞—é —Ä–æ–∑—ã–≥—Ä—ã—à...', 'info', 'lotteryLog');

            const supabase = window.supabaseClient || window.db;
            if (!supabase) {
                log('‚ùå Supabase –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'error', 'lotteryLog');
                return;
            }

            const now = new Date();
            const endDate = new Date(now);
            endDate.setDate(now.getDate() + 7);

            const { error } = await supabase.from('lotteries').insert({
                title: '–†–æ–∑—ã–≥—Ä—ã—à $200',
                prize: '–î–µ–Ω–µ–∂–Ω—ã–π –ø—Ä–∏–∑ 200 USD',
                prize_value: 200,
                entry_cost_ar: 100,
                start_date: now.toISOString(),
                end_date: endDate.toISOString(),
                status: 'active'
            });

            if (error) {
                log(`‚ùå ${error.message}`, 'error', 'lotteryLog');
            } else {
                log(`‚úÖ –†–æ–∑—ã–≥—Ä—ã—à —Å–æ–∑–¥–∞–Ω (–¥–æ ${endDate.toLocaleDateString()})`, 'success', 'lotteryLog');
            }
        }

        async function insertAll() {
            await insertArticles();
            await insertCourse();
            await insertProducts();
            await insertChallenges();
            await insertLottery();
            alert('‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤—Å—Ç–∞–≤–ª–µ–Ω—ã!');
        }
    </script>
</body>
</html>
