<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR SHOP</title>
    <link rel="stylesheet" href="shop-styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <div class="container">
        <!-- Единый хедер с кнопкой назад и профилем -->
        <div class="header-glass">
            <button class="back-btn-compact" onclick="window.location.href='index.html'">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
                    <path d="M12 4L6 10L12 16" stroke="#FFD700" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>

            <div class="header-center">
                <div class="logo-text">AR SHOP</div>
            </div>

            <div class="profile-compact">
                <img id="userAvatar" class="avatar-mini" src="" alt="">
                <div class="balance-compact">
                    <img src="icons/arcoin.png" alt="AR Coin" class="coin-icon-mini rotating">
                    <span id="userBalance" class="balance-text">0</span>
                </div>
            </div>
        </div>

        <!-- Карточки продуктов -->
        <div class="products-section">
            <!-- Две карточки в ряд -->
            <div class="products-row">
                <!-- Premium Zone -->
                <div class="product-card premium small">
                    <div class="product-icon">
                        <img src="icons/SPOT.png" alt="Spot Zone" style="width: 65px; height: 65px; object-fit: contain;">
                    </div>
                    <div class="product-content">
                        <h3 class="product-title" style="font-size: 15px;">КЛУБ<br><span style="font-size: 13px;">СПОТ торговли</span></h3>
                        <p class="product-desc">Обучение инвестициям в ТОП монеты с ROI >85%</p>
                        <div class="product-price">2000 AR/мес</div>
                    </div>
                    <button class="product-button" onclick="showModal('spot')">
                        Подробнее
                    </button>
                </div>

                <!-- Futures Zone -->
                <div class="product-card futures small">
                    <div class="product-icon">
                        <img src="icons/х10.png" alt="Futures Zone" style="width: 60px; height: 60px; object-fit: contain;">
                    </div>
                    <div class="product-content">
                        <h3 class="product-title" style="font-size: 15px;">Торговля на фьючерсах</h3>
                        <p class="product-desc">Ежедневные торговые сигналы с точностью >85%</p>
                        <div class="product-price">1500 AR/мес</div>
                    </div>
                    <button class="product-button" onclick="showModal('futures')">
                        Подробнее
                    </button>
                </div>
            </div>

        </div>
    </div>

    <!-- Модальное окно -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeModal()">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Навигационное меню -->
    <nav class="bottom-navigation">
        <div class="nav-item" onclick="window.location.href='index.html'">
            <img src="icons/main.png" alt="Главная" class="nav-icon">
            <span class="nav-label">Главная</span>
        </div>
        <div class="nav-item" onclick="window.location.href='tasks.html'">
            <img src="icons/todo.png" alt="Задания" class="nav-icon">
            <span class="nav-label">Задания</span>
        </div>
        <div class="nav-item active" onclick="window.location.href='shop.html?v=2'">
            <img src="icons/SHOP.png" alt="Магазин" class="nav-icon">
            <span class="nav-label">Магазин</span>
        </div>
    </nav>

    <script>
        // Инициализация Telegram WebApp
        const tg = window.Telegram?.WebApp;
        tg?.ready();
        tg?.expand();

        // Получаем данные пользователя
        const user = tg?.initDataUnsafe?.user;

        // Загружаем данные пользователя
        function loadUserData() {
            // Загружаем аватар
            if (user?.photo_url) {
                document.getElementById('userAvatar').src = user.photo_url;
            } else {
                document.getElementById('userAvatar').style.display = 'none';
            }

            // Загружаем баланс
            const balance = localStorage.getItem('ar_balance') || '0';
            document.getElementById('userBalance').textContent = balance;
        }

        // Обновляем баланс при изменениях
        window.addEventListener('storage', function(e) {
            if (e.key === 'ar_balance') {
                document.getElementById('userBalance').textContent = e.newValue || '0';
            }
        });

        // Обновляем баланс при возвращении на страницу
        window.addEventListener('pageshow', function(event) {
            const balance = localStorage.getItem('ar_balance') || '0';
            document.getElementById('userBalance').textContent = balance;
        });


        // Функции модального окна
        function showModal(type) {
            const modal = document.getElementById('productModal');
            const modalBody = document.getElementById('modalBody');

            let content = '';

            if (type === 'spot') {
                content = `
                    <div class="modal-header">
                        <img src="icons/SPOT.png" alt="SPOT" style="width: 80px; height: 80px; object-fit: contain;">
                        <h2>КЛУБ СПОТ торговли</h2>
                    </div>
                    <div class="modal-description">
                        <h3>Что включено:</h3>
                        <ul>
                            <li>Обучение инвестициям в ТОП монеты</li>
                            <li>Ежедневные спотовые сигналы</li>
                            <li>Аналитика рынка</li>
                            <li>Приоритетная поддержка</li>
                            <li>Доступ к закрытому каналу</li>
                            <li>ROI >85% на дистанции</li>
                        </ul>
                    </div>
                    <div class="modal-price">2000 AR/месяц</div>
                    <button class="modal-button" onclick="window.open('https://premium-ar.com/', '_blank')">
                        Перейти на сайт
                    </button>
                `;
            } else if (type === 'futures') {
                content = `
                    <div class="modal-header">
                        <img src="icons/х10.png" alt="Futures" style="width: 80px; height: 80px; object-fit: contain;">
                        <h2>Торговля на фьючерсах</h2>
                    </div>
                    <div class="modal-description">
                        <h3>Что включено:</h3>
                        <ul>
                            <li>Ежедневные торговые сигналы</li>
                            <li>Точность отработки >85%</li>
                            <li>Риск-менеджмент</li>
                            <li>Обучающие материалы</li>
                            <li>VIP чат трейдеров</li>
                            <li>Команда с опытом 8+ лет</li>
                        </ul>
                    </div>
                    <div class="modal-price">1500 AR/месяц</div>
                    <button class="modal-button" onclick="window.open('https://www.ar-premium.com/', '_blank')">
                        Перейти на сайт
                    </button>
                `;
            }

            modalBody.innerHTML = content;
            modal.style.display = 'block';
        }

        function closeModal() {
            document.getElementById('productModal').style.display = 'none';
        }

        // Закрытие модального окна при клике вне его
        window.onclick = function(event) {
            const modal = document.getElementById('productModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // Загружаем данные при старте
        window.addEventListener('DOMContentLoaded', loadUserData);
    </script>
</body>
</html>