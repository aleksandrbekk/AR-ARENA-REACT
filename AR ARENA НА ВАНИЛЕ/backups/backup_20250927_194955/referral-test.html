<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1a1a1a;
            color: white;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
        }
        .info-box {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .ref-link {
            background: #333;
            padding: 10px;
            border-radius: 5px;
            word-break: break-all;
            margin: 10px 0;
            color: #4CAF50;
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin: 10px 0;
        }
        button:hover {
            background: #45a049;
        }
        .warning {
            color: #ff9800;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîó –¢–µ—Å—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã</h1>

        <div class="info-box">
            <h3>–¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</h3>
            <div id="current-user">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>

        <div class="info-box">
            <h3>–ü–æ–ª—É—á–µ–Ω–Ω—ã–π start_param:</h3>
            <div id="start-param">–ü—Ä–æ–≤–µ—Ä–∫–∞...</div>
        </div>

        <div class="info-box">
            <h3>–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</h3>
            <div class="ref-link" id="ref-link">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è...</div>
            <button onclick="copyRefLink()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
            <button onclick="shareRefLink()">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –≤ Telegram</button>
        </div>

        <div class="info-box">
            <h3>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:</h3>
            <ol>
                <li>–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à—É —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É</li>
                <li>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—ë –¥—Ä—É–≥—É –≤ Telegram</li>
                <li>–ö–æ–≥–¥–∞ –¥—Ä—É–≥ –ø–µ—Ä–µ–π–¥–µ—Ç –ø–æ —Å—Å—ã–ª–∫–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç –±–æ—Ç–∞, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ 100 AR</li>
                <li>–í–∞—à –¥—Ä—É–≥ –ø–æ–ª—É—á–∏—Ç 50 AR –∫–∞–∫ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å</li>
            </ol>
            <p class="warning">‚ö†Ô∏è –ë–æ–Ω—É—Å –Ω–∞—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º!</p>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        const tg = window.Telegram?.WebApp;
        tg?.ready();

        // –ò–º—è –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–ó–ê–ú–ï–ù–ò–¢–ï –ù–ê –†–ï–ê–õ–¨–ù–û–ï!)
        const BOT_USERNAME = 'your_bot'; // <-- –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ username –≤–∞—à–µ–≥–æ –±–æ—Ç–∞!

        // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const user = tg?.initDataUnsafe?.user;

        // –û—Ç–æ–±—Ä–∞–∂–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        if (user) {
            document.getElementById('current-user').innerHTML = `
                <strong>${user.first_name} ${user.last_name || ''}</strong><br>
                ID: ${user.id}<br>
                Username: @${user.username || '–Ω–µ —É–∫–∞–∑–∞–Ω'}
            `;

            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
            const refLink = `https://t.me/${BOT_USERNAME}?start=ref_${user.id}`;
            document.getElementById('ref-link').textContent = refLink;
        } else {
            document.getElementById('current-user').innerHTML = 'Telegram WebApp –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω';
            document.getElementById('ref-link').textContent = '–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ';
        }

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π start_param
        let startParam = tg?.initDataUnsafe?.start_param;

        // –ü—Ä–æ–±—É–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏–∑ URL
        if (!startParam) {
            const urlParams = new URLSearchParams(window.location.search);
            startParam = urlParams.get('start_param');
        }

        // –ü—Ä–æ–±—É–µ–º –∏–∑ hash
        if (!startParam && window.location.hash) {
            const hashParams = new URLSearchParams(window.location.hash.substring(1));
            const tgWebAppData = hashParams.get('tgWebAppData');
            if (tgWebAppData) {
                const decodedData = decodeURIComponent(tgWebAppData);
                const dataParams = new URLSearchParams(decodedData);
                startParam = dataParams.get('start_param');
            }
        }

        if (startParam) {
            document.getElementById('start-param').innerHTML = `
                <strong style="color: #4CAF50;">${startParam}</strong><br>
                ${startParam.startsWith('ref_') ?
                    '–†–µ—Ñ–µ—Ä–µ—Ä ID: ' + startParam.replace('ref_', '') :
                    '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç'}
            `;
        } else {
            document.getElementById('start-param').innerHTML =
                '<span style="color: #ff9800;">–ù–ï–¢ –ü–ê–†–ê–ú–ï–¢–†–ê</span> - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—à–µ–ª –±–µ–∑ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–∏';
        }

        // –§—É–Ω–∫—Ü–∏—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏
        function copyRefLink() {
            const link = document.getElementById('ref-link').textContent;
            if (link && link !== '–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ') {
                navigator.clipboard.writeText(link).then(() => {
                    alert('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!');
                });
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å—Å—ã–ª–∫–∏
        function shareRefLink() {
            const link = document.getElementById('ref-link').textContent;
            if (link && link !== '–ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ' && tg) {
                const message = `üéÅ –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è –∫ AR ARENA!\n\n–ü–æ–ª—É—á–∏ 50 AR –≤ –ø–æ–¥–∞—Ä–æ–∫ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏!\n\n${link}`;
                tg.switchInlineQuery(message);
            }
        }
    </script>
</body>
</html>