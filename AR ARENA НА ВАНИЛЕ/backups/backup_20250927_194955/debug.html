<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Telegram WebApp</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a1a;
            color: #0f0;
        }
        .debug-info {
            background: #000;
            padding: 15px;
            border: 1px solid #0f0;
            margin: 10px 0;
            white-space: pre-wrap;
            word-break: break-all;
        }
        h3 {
            color: #ff0;
        }
    </style>
</head>
<body>
    <h2>Telegram WebApp Debug Info</h2>

    <h3>1. Telegram Object:</h3>
    <div class="debug-info" id="telegram-obj"></div>

    <h3>2. WebApp Object:</h3>
    <div class="debug-info" id="webapp-obj"></div>

    <h3>3. InitData:</h3>
    <div class="debug-info" id="init-data"></div>

    <h3>4. InitDataUnsafe:</h3>
    <div class="debug-info" id="init-data-unsafe"></div>

    <h3>5. User Data:</h3>
    <div class="debug-info" id="user-data"></div>

    <script>
        // Ждем загрузки Telegram WebApp
        setTimeout(() => {
            const tg = window.Telegram?.WebApp;

            // 1. Telegram object
            document.getElementById('telegram-obj').textContent =
                typeof window.Telegram !== 'undefined' ? 'Telegram объект доступен' : 'Telegram НЕ доступен';

            // 2. WebApp object
            document.getElementById('webapp-obj').textContent =
                tg ? 'WebApp доступен' : 'WebApp НЕ доступен';

            if (tg) {
                // 3. InitData
                document.getElementById('init-data').textContent =
                    tg.initData || 'InitData пустой';

                // 4. InitDataUnsafe
                document.getElementById('init-data-unsafe').textContent =
                    JSON.stringify(tg.initDataUnsafe, null, 2) || 'InitDataUnsafe пустой';

                // 5. User data
                const userData = tg.initDataUnsafe?.user;
                if (userData) {
                    document.getElementById('user-data').textContent =
                        JSON.stringify(userData, null, 2);
                } else {
                    document.getElementById('user-data').textContent = 'User data НЕ найден';
                }

                // Expand app
                tg.ready();
                tg.expand();
            }
        }, 100);
    </script>
</body>
</html>